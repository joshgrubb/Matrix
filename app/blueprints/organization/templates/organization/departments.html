{% extends "base.html" %}
{% block title %}Departments â€” PositionMatrix{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1><i class="bi bi-diagram-3 me-2"></i>Departments</h1>
    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="showInactive"
               {% if show_inactive %}checked{% endif %}
               onchange="window.location.href='?show_inactive=' + (this.checked ? '1' : '0')">
        <label class="form-check-label" for="showInactive">Show inactive</label>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Department Code</th>
                <th>Department Name</th>
                <th>Status</th>
                <th class="text-end">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for dept in departments %}
            <tr {% if not dept.is_active %}class="table-secondary"{% endif %}>
                <td><code>{{ dept.department_code }}</code></td>
                <td>{{ dept.department_name }}</td>
                <td>
                    {% if dept.is_active %}
                    <span class="badge bg-success">Active</span>
                    {% else %}
                    <span class="badge bg-secondary">Inactive</span>
                    {% endif %}
                </td>
                <td class="text-end">
                    <a href="{{ url_for('organization.department_detail', department_id=dept.id) }}"
                       class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye me-1"></i>View Divisions
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center text-muted py-4">
                    No departments found. Run an HR sync from the Admin panel.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
